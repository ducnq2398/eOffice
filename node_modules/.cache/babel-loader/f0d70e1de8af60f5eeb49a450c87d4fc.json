{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\EOfficeWeb\\\\src\\\\components\\\\AdminCompany\\\\DepartmentManagement\\\\DepartmentManagement.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { Container, FormGroup, Col, Row } from \"reactstrap\";\nimport Header from \"../../Nav/Header\";\nimport Sidebar from \"../../Sidebar/Sidebar\";\nimport \"../../../css/Department.css\";\nimport TreeView from \"@material-ui/lab/TreeView\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport { Autocomplete, createFilterOptions, TreeItem } from \"@material-ui/lab\";\nimport departmentAPI from \"../../../api/departmentAPI\";\nimport { getUser } from \"../../../utils/Common\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { toast } from \"react-toastify\";\nimport Moment from \"moment\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport GetSubDepartment from \"../../GetData/GetSubDepartment\";\nimport { Button, DialogActions, DialogContent, TextField } from \"@material-ui/core\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst filter = createFilterOptions();\n\nfunction DepartmentManagerment() {\n  _s();\n\n  const [isOpen, setIsOpen] = useState(false);\n  const [listDepartment, setListDepartment] = useState([]);\n  const [value, setValue] = useState(null);\n  const [sub_department, setSubDepartment] = useState(null);\n  const [checkDepart, setCheckDepart] = useState({\n    error: false,\n    message: \"\"\n  });\n  const [checkSubDepart, setSubCheckDepart] = useState({\n    error: false,\n    message: \"\"\n  });\n\n  function toogle() {\n    setIsOpen(!isOpen);\n  }\n\n  useEffect(() => {\n    async function getDepartment() {\n      const id = getUser().CompanyId;\n\n      try {\n        const response = await departmentAPI.getDepartmentByCompanyId(id);\n        setListDepartment(response.data);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n\n    getDepartment();\n  }, [isOpen]);\n\n  function addDepartment(e) {\n    e.preventDefault();\n\n    if (value === null) {\n      setCheckDepart({\n        error: true,\n        message: \"choose one department or input new\"\n      });\n    } else if (value !== Object && value.name.length > 255) {\n      setCheckDepart({\n        error: true,\n        message: \"Department name max length 255 characters\"\n      });\n    } else if (sub_department === null) {\n      setSubCheckDepart({\n        error: true,\n        message: \"Please input subdepartment\"\n      });\n    } else if (sub_department.length > 255) {\n      setSubCheckDepart({\n        error: true,\n        message: \"Subdepartment name max length 255 characters\"\n      });\n    } else if (value !== Object) {\n      const params = {\n        name: value.name,\n        companyId: getUser().CompanyId,\n        creatorId: getUser().Id,\n        dateCreate: Moment(new Date()).format('yyyy-MM-DD' + 'T' + 'HH:mm:ss.SSS' + 'Z')\n      };\n      departmentAPI.addDepartment(params).then(function (res) {\n        console.log(res.data);\n        const params = {\n          name: sub_department,\n          departmentId: res.data.id,\n          companyId: getUser().CompanyId,\n          creatorId: getUser().Id,\n          dateCreate: Moment(new Date()).format('yyyy-MM-DD' + 'T' + 'HH:mm:ss.SSS' + 'Z')\n        };\n        departmentAPI.addSubDepartment(params).then(function (res) {\n          toast.success(\"Add department successfully\", {\n            position: toast.POSITION.TOP_CENTER\n          });\n          setIsOpen(false);\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    } else {\n      const params = {\n        name: sub_department,\n        departmentId: value.id,\n        companyId: getUser().CompanyId,\n        creatorId: getUser().Id,\n        dateCreate: Moment(new Date()).format('yyyy-MM-DD' + 'T' + 'HH:mm:ss.SSS' + 'Z')\n      };\n      departmentAPI.addSubDepartment(params).then(function (res) {\n        toast.success(\"Add department successfully\", {\n          position: toast.POSITION.TOP_CENTER\n        });\n        setIsOpen(false);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-panel\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        fluid: true,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"add\",\n          children: /*#__PURE__*/_jsxDEV(FormGroup, {\n            row: true,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              onClick: toogle,\n              color: \"primary\",\n              children: \"Add department\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(TreeView, {\n            className: \"tree\",\n            defaultCollapseIcon: /*#__PURE__*/_jsxDEV(ExpandMoreIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 36\n            }, this),\n            defaultExpandIcon: /*#__PURE__*/_jsxDEV(ChevronRightIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 34\n            }, this),\n            children: listDepartment.map(department => /*#__PURE__*/_jsxDEV(TreeItem, {\n              nodeId: department.id,\n              label: department.name,\n              children: /*#__PURE__*/_jsxDEV(GetSubDepartment, {\n                id: department.id\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 19\n              }, this)\n            }, department.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n        onClose: toogle,\n        open: isOpen,\n        fullWidth: true,\n        disableBackdropClick: true,\n        disableEscapeKeyDown: true,\n        children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n          children: \"Add Department\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n          children: /*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              sm: 6,\n              children: /*#__PURE__*/_jsxDEV(Autocomplete, {\n                value: value,\n                onChange: (event, newValue) => {\n                  if (typeof newValue === \"string\") {\n                    setValue({\n                      name: newValue\n                    });\n                  } else if (newValue && newValue.inputValue) {\n                    setValue({\n                      name: newValue.inputValue\n                    });\n                  } else {\n                    setValue(newValue);\n                  }\n                },\n                filterOptions: (options, params) => {\n                  const filtered = filter(options, params);\n\n                  if (params.inputValue !== \"\") {\n                    filtered.push({\n                      inputValue: params.inputValue,\n                      name: `Add \"${params.inputValue}\"`\n                    });\n                  }\n\n                  return filtered;\n                },\n                selectOnFocus: true,\n                clearOnBlur: true,\n                handleHomeEndKeys: true,\n                id: \"free-solo-with-text-demo\",\n                options: listDepartment,\n                getOptionLabel: option => {\n                  if (typeof option === \"string\") {\n                    return option;\n                  }\n\n                  if (option.inputValue) {\n                    return option.inputValue;\n                  }\n\n                  return option.name;\n                },\n                renderOption: option => option.name,\n                style: {\n                  width: 260\n                },\n                freeSolo: true,\n                renderInput: params => /*#__PURE__*/_jsxDEV(TextField, { ...params,\n                  label: \"Department\",\n                  variant: \"outlined\",\n                  error: checkDepart.error,\n                  helperText: checkDepart.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              sm: 5,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                style: {\n                  width: \"250px\"\n                },\n                error: checkSubDepart.error,\n                helperText: checkSubDepart.message,\n                label: \"Sub Department\",\n                name: \"sub_department\",\n                variant: \"outlined\",\n                required: true,\n                onChange: e => setSubDepartment(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            color: \"secondary\",\n            variant: \"contained\",\n            onClick: () => setIsOpen(!isOpen),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            color: \"primary\",\n            variant: \"contained\",\n            style: {\n              marginRight: \"29px\"\n            },\n            onClick: addDepartment,\n            children: \"Create\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 138,\n    columnNumber: 5\n  }, this);\n}\n\n_s(DepartmentManagerment, \"yxhfp5gr4spKfpk03XiE/ye1i7k=\");\n\n_c = DepartmentManagerment;\nexport default DepartmentManagerment;\n\nvar _c;\n\n$RefreshReg$(_c, \"DepartmentManagerment\");","map":{"version":3,"sources":["C:/Users/Admin/Desktop/EOfficeWeb/src/components/AdminCompany/DepartmentManagement/DepartmentManagement.js"],"names":["useEffect","useState","Container","FormGroup","Col","Row","Header","Sidebar","TreeView","ExpandMoreIcon","ChevronRightIcon","Autocomplete","createFilterOptions","TreeItem","departmentAPI","getUser","toast","Moment","DialogTitle","Dialog","GetSubDepartment","Button","DialogActions","DialogContent","TextField","filter","DepartmentManagerment","isOpen","setIsOpen","listDepartment","setListDepartment","value","setValue","sub_department","setSubDepartment","checkDepart","setCheckDepart","error","message","checkSubDepart","setSubCheckDepart","toogle","getDepartment","id","CompanyId","response","getDepartmentByCompanyId","data","console","log","addDepartment","e","preventDefault","Object","name","length","params","companyId","creatorId","Id","dateCreate","Date","format","then","res","departmentId","addSubDepartment","success","position","POSITION","TOP_CENTER","catch","map","department","event","newValue","inputValue","options","filtered","push","option","width","target","marginRight"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport {\r\n  Container,\r\n  FormGroup,\r\n  Col,\r\n  Row,\r\n} from \"reactstrap\";\r\nimport Header from \"../../Nav/Header\";\r\nimport Sidebar from \"../../Sidebar/Sidebar\";\r\nimport \"../../../css/Department.css\";\r\nimport TreeView from \"@material-ui/lab/TreeView\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\r\nimport { Autocomplete, createFilterOptions, TreeItem } from \"@material-ui/lab\";\r\nimport departmentAPI from \"../../../api/departmentAPI\";\r\nimport { getUser } from \"../../../utils/Common\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { toast } from \"react-toastify\";\r\nimport Moment from \"moment\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport GetSubDepartment from \"../../GetData/GetSubDepartment\";\r\nimport {\r\n  Button,\r\n  DialogActions,\r\n  DialogContent,\r\n  TextField,\r\n} from \"@material-ui/core\";\r\n\r\nconst filter = createFilterOptions();\r\nfunction DepartmentManagerment() {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [listDepartment, setListDepartment] = useState([]);\r\n  const [value, setValue] = useState(null);\r\n  const [sub_department, setSubDepartment] = useState(null);\r\n  const [checkDepart, setCheckDepart] = useState({\r\n    error: false,\r\n    message: \"\",\r\n  });\r\n  const [checkSubDepart, setSubCheckDepart] = useState({\r\n    error: false,\r\n    message: \"\",\r\n  });\r\n\r\n  function toogle() {\r\n    setIsOpen(!isOpen);\r\n  }\r\n  useEffect(() => {\r\n    async function getDepartment() {\r\n      const id = getUser().CompanyId;\r\n      try {\r\n        const response = await departmentAPI.getDepartmentByCompanyId(id);\r\n        setListDepartment(response.data);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n    getDepartment();\r\n  }, [isOpen]);\r\n\r\n  function addDepartment(e) {\r\n    e.preventDefault();\r\n    if (value === null) {\r\n      setCheckDepart({\r\n        error: true,\r\n        message: \"choose one department or input new\",\r\n      });\r\n    } else if (value !== Object && value.name.length > 255) {\r\n      setCheckDepart({\r\n        error: true,\r\n        message: \"Department name max length 255 characters\",\r\n      });\r\n    } else if (sub_department === null) {\r\n      setSubCheckDepart({\r\n        error: true,\r\n        message: \"Please input subdepartment\",\r\n      });\r\n    } else if (sub_department.length > 255) {\r\n      setSubCheckDepart({\r\n        error: true,\r\n        message: \"Subdepartment name max length 255 characters\",\r\n      });\r\n    } else if (value !== Object) {\r\n      const params = {\r\n        name: value.name,\r\n        companyId: getUser().CompanyId,\r\n        creatorId: getUser().Id,\r\n        dateCreate: Moment(new Date()).format('yyyy-MM-DD'+'T'+'HH:mm:ss.SSS'+'Z'),\r\n      };\r\n      departmentAPI\r\n        .addDepartment(params)\r\n        .then(function (res) {\r\n          console.log(res.data);\r\n          const params = {\r\n            name: sub_department,\r\n            departmentId: res.data.id,\r\n            companyId: getUser().CompanyId,\r\n            creatorId: getUser().Id,\r\n            dateCreate: Moment(new Date()).format('yyyy-MM-DD'+'T'+'HH:mm:ss.SSS'+'Z'),\r\n          };\r\n          departmentAPI\r\n            .addSubDepartment(params)\r\n            .then(function (res) {\r\n              toast.success(\"Add department successfully\", {\r\n                position: toast.POSITION.TOP_CENTER,\r\n              });\r\n              setIsOpen(false)\r\n            })\r\n            .catch(function (error) {\r\n              console.log(error);\r\n            });\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        });\r\n    } else {\r\n      const params = {\r\n        name: sub_department,\r\n        departmentId: value.id,\r\n        companyId: getUser().CompanyId,\r\n        creatorId: getUser().Id,\r\n        dateCreate: Moment(new Date()).format('yyyy-MM-DD'+'T'+'HH:mm:ss.SSS'+'Z'),\r\n      };\r\n      departmentAPI\r\n        .addSubDepartment(params)\r\n        .then(function (res) {\r\n          toast.success(\"Add department successfully\", {\r\n            position: toast.POSITION.TOP_CENTER,\r\n          });\r\n          setIsOpen(false);\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        });\r\n    }\r\n  }\r\n  return (\r\n    <div>\r\n      <Sidebar />\r\n      <div className=\"main-panel\">\r\n        <Header />\r\n        <Container fluid={true}>\r\n          <div className=\"add\">\r\n            <FormGroup row>\r\n              <Button variant=\"contained\" onClick={toogle} color=\"primary\">\r\n                Add department\r\n              </Button>\r\n            </FormGroup>\r\n          </div>\r\n          <div>\r\n            <TreeView\r\n              className=\"tree\"\r\n              defaultCollapseIcon={<ExpandMoreIcon />}\r\n              defaultExpandIcon={<ChevronRightIcon />}\r\n            >\r\n              {listDepartment.map((department) => (\r\n                <TreeItem\r\n                  key={department.id}\r\n                  nodeId={department.id}\r\n                  label={department.name}\r\n                >\r\n                  <GetSubDepartment id={department.id} />\r\n                </TreeItem>\r\n              ))}\r\n            </TreeView>\r\n          </div>\r\n        </Container>\r\n        <Dialog\r\n          onClose={toogle}\r\n          open={isOpen}\r\n          fullWidth\r\n          disableBackdropClick\r\n          disableEscapeKeyDown\r\n        >\r\n          <DialogTitle>Add Department</DialogTitle>\r\n          <DialogContent>\r\n            <Row>\r\n              <Col sm={6}>\r\n                <Autocomplete\r\n                  value={value}\r\n                  onChange={(event, newValue) => {\r\n                    if (typeof newValue === \"string\") {\r\n                      setValue({\r\n                        name: newValue,\r\n                      });\r\n                    } else if (newValue && newValue.inputValue) {\r\n                      setValue({\r\n                        name: newValue.inputValue,\r\n                      });\r\n                    } else {\r\n                      setValue(newValue);\r\n                    }\r\n                  }}\r\n                  filterOptions={(options, params) => {\r\n                    const filtered = filter(options, params);\r\n                    if (params.inputValue !== \"\") {\r\n                      filtered.push({\r\n                        inputValue: params.inputValue,\r\n                        name: `Add \"${params.inputValue}\"`,\r\n                      });\r\n                    }\r\n\r\n                    return filtered;\r\n                  }}\r\n                  selectOnFocus\r\n                  clearOnBlur\r\n                  handleHomeEndKeys\r\n                  id=\"free-solo-with-text-demo\"\r\n                  options={listDepartment}\r\n                  getOptionLabel={(option) => {\r\n                    if (typeof option === \"string\") {\r\n                      return option;\r\n                    }\r\n                    if (option.inputValue) {\r\n                      return option.inputValue;\r\n                    }\r\n                    return option.name;\r\n                  }}\r\n                  renderOption={(option) => option.name}\r\n                  style={{ width: 260 }}\r\n                  freeSolo\r\n                  renderInput={(params) => (\r\n                    <TextField\r\n                      {...params}\r\n                      label=\"Department\"\r\n                      variant=\"outlined\"\r\n                      error={checkDepart.error}\r\n                      helperText={checkDepart.message}\r\n                    />\r\n                  )}\r\n                />\r\n              </Col>\r\n              <Col sm={5}>\r\n                <TextField\r\n                  style={{ width: \"250px\" }}\r\n                  error={checkSubDepart.error}\r\n                  helperText={checkSubDepart.message}\r\n                  label=\"Sub Department\"\r\n                  name=\"sub_department\"\r\n                  variant=\"outlined\"\r\n                  required\r\n                  onChange={(e) => setSubDepartment(e.target.value)}\r\n                />\r\n              </Col>\r\n            </Row>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button\r\n              color=\"secondary\"\r\n              variant=\"contained\"\r\n              onClick={() => setIsOpen(!isOpen)}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n              style={{ marginRight: \"29px\" }}\r\n              onClick={addDepartment}\r\n            >\r\n              Create\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default DepartmentManagerment;\r\n"]},"metadata":{},"sourceType":"module"}